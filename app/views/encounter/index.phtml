<?php use Phalcon\Tag; ?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<?= $this->tag->form(array("encounter/generate", "method"=>"POST", "onsubmit"=>"generateEncounters()")); ?>

 <p>
    <label for="terrain">Terrain</label>
    <?= $this->tag->select(array("terrain", $validTerrains)) ?>
 </p>
 
 <p>
    <label for="difficulty">Difficulty</label>
    <?= $this->tag->select(array("difficulty", $validDifficulties)) ?>
 </p>
	
 <p>
    <?= $this->tag->submitButton("Generate") ?>
 </p>

<?= $this->tag->endForm() ?>
<hr/>
<div id="encounters"></div>


<script>
function generateEncounters() {
	event.preventDefault();
	url = "generate";
	data = {
		characterLevels: [1,1,1,1],
		terrain: $("#terrain").val(),
		difficulty: $("#difficulty").val()
	};
	$.ajax({
		url:url,
		data:data,
		type:"POST",
		success:function(data) {
			$("#encounters").html(data);
		}
	});
}
</script>